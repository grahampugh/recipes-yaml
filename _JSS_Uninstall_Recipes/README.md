JSS Uninstall Recipes
======================

**Warning: in active, but early, development!**

JSS Uninstall Recipes (`.jss-uninstall`) are intended to provide Self Service uninstaller policies for applications. Each recipe also has a trigger, which could be used in scripts or other policies as required.

Why?
----

Unless you manually package up applications using Composer, there is no automated way to provide uninstallers in Jamf Pro. Unlike Munki, there is no way to include an uninstaller method or script in package metadata, and therefore no way for installer policies to become uninstallers.

Since packages created and uploaded to Jamf Pro servers using AutoPkg and JSSImporter cannot benefit from the Indexing option of Composer, we need an alternative, preferably automatic way to produce uninstaller policies. JSSImporter can create package-free policies containing scripts, which gives us the opportunity to curate uninstallers.


How?
----

Uninstallers can be characterised into four types:

* `Application Bundle Removal` - a scommon cript can be used to emulate deleting any application bundle, normally from the `Applications` folder.
* `Package Uninstallation` - the file/folder information from a package receipt can be used to remove everything that was installed by a package, as long as there are no pre- or postinstall scripts in the package.
* `Uninstaller Command` - some vendors provide a shell command for uninstalling their application.
* `Uninstaller Package` - some vendors provide a package installer which contains scripts for uninstalling their application.
* `Uninstaller script` - individual scripts can be made for removing more complex installations; normally a combination of removing disparate files, folders, perhaps LaunchDaemons or LaunchAgents, and forgetting package receipts.

Recipes for some of these types of uninstaller can be generated by overriding common parent recipes, simplifying the process of writing the recipes. This repo will serve to include such template recipes, plus some commonly required uninstallers. For example, for the `Application Bundle Removal` type:

* `UninstallApplication.jss-script.recipe`: generates an uninstaller script for any particular application, and a ScriptTemplate.xml file for the same script. We need to generate the scripts from within a recipe so that we can substitute the name of the application. This is necessary because Script Parameters are not yet possible using JSSImporter.
* `UninstallApplication.jss-uninstall.recipe`: uploads the generated script to the Jamf Pro server using JSSImporter, creating a policy and smart group similar to any normal JSS recipe.
* `Carbon Copy Cloner.jss-uninstall.recipe`: effectively the override - provides just the NAME and PKG_ID of the application to remove.
